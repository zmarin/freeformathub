---
export const prerender = true;
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout
  title="JSON Tree Viewer - FreeFormatHub"
  description="Interactive JSON tree viewer with search and navigation"
>
  <div id="json-tree-app" class="min-h-screen bg-background">
    <div class="container mx-auto p-4">
      <div class="mb-6">
        <h1 class="text-2xl font-bold text-text-primary mb-2">JSON Tree Viewer</h1>
        <p class="text-text-secondary">Interactive JSON viewer with search and navigation capabilities</p>
      </div>

      <div id="json-tree-container" class="bg-surface border border-border rounded-lg">
        <div style="padding: 1rem; border-bottom: 1px solid var(--color-border); background-color: var(--color-surface-secondary);">
          <div style="display: flex; align-items: center; justify-content: space-between;">
            <div style="display: flex; align-items: center; gap: 1rem;">
              <span style="font-size: 0.875rem; color: var(--color-text-secondary);">Loading JSON data...</span>
            </div>
            <div style="display: flex; align-items: center; gap: 0.5rem;">
              <button id="copy-btn" class="btn btn-outline btn-sm">
                ðŸ“‹ Copy JSON
              </button>
              <button id="download-btn" class="btn btn-outline btn-sm">
                ðŸ’¾ Download
              </button>
            </div>
          </div>
        </div>

        <div id="json-tree-content" class="p-4">
          <!-- JsonTreeView component will be rendered here -->
        </div>
      </div>
    </div>
  </div>

  <script>
    import { JsonTreeViewApp } from '../../components/viewer/JsonTreeViewApp';

    // Initialize the app when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('json-tree-content');
      if (container) {
        const app = new JsonTreeViewApp(container);
        app.initialize();
      }
    });
  </script>
</BaseLayout>

<style>
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.375rem 0.75rem;
    border: 1px solid var(--color-border);
    border-radius: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 150ms ease;
    cursor: pointer;
    text-decoration: none;
  }

  .btn-outline {
    background-color: var(--color-surface);
    color: var(--color-text-primary);
  }

  .btn-outline:hover {
    background-color: var(--color-surface-secondary);
  }

  .btn-sm {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
  }
</style>