---
import BaseLayout from '../layouts/BaseLayout.astro';
// Populate tool registry for curated and trending sections
import '../lib/tools/index';
import { TOOL_CATEGORIES, getToolsByCategory, getCategory, getTool } from '../lib/tools/registry';
import ToolCategories from '../components/ui/ToolCategories.tsx';
import AdPlacement from '../components/ads/AdPlacement.astro';
import InternalLinksCluster from '../components/seo/InternalLinksCluster.astro';

const curatedCategoryId = 'formatters';
const curatedCategory = getCategory(curatedCategoryId);
const curatedTools = getToolsByCategory(curatedCategoryId).slice(0, 6);

const curatedEncoders = getCategory('encoders');
const curatedEncodersTools = getToolsByCategory('encoders').slice(0, 6);

const curatedConverters = getCategory('converters');
const curatedConvertersTools = getToolsByCategory('converters').slice(0, 6);

// Hand-picked trending tools (by id) - featuring highest Google Trends search volumes
const trendingIds = [
  'jwt-decoder',
  'currency-converter',
  'jwt-generator',
  'json-formatter',
  'xml-formatter',
  'base64-encoder',
  'xml-to-json-converter',
  'url-encoder',
  'csv-formatter',
  'yaml-formatter',
  'js-beautifier',
  'sql-formatter'
];
const trendingTools = trendingIds
  .map((id) => getTool(id))
  .filter((t) => !!t)
  .slice(0, 8);

type ToolSummary = ReturnType<typeof getToolsByCategory>[number];

interface CuratedCollection {
  id: string;
  name: string;
  description: string;
  tools: ToolSummary[];
}

const curatedCollections: CuratedCollection[] = [
  curatedCategory && curatedTools.length > 0
    ? {
        id: curatedCategory.id,
        name: curatedCategory.name,
        description: curatedCategory.description,
        tools: curatedTools
      }
    : null,
  curatedEncoders && curatedEncodersTools.length > 0
    ? {
        id: curatedEncoders.id,
        name: curatedEncoders.name,
        description: curatedEncoders.description,
        tools: curatedEncodersTools
      }
    : null,
  curatedConverters && curatedConvertersTools.length > 0
    ? {
        id: curatedConverters.id,
        name: curatedConverters.name,
        description: curatedConverters.description,
        tools: curatedConvertersTools
      }
    : null
].filter((collection): collection is CuratedCollection => collection !== null);

// Enhanced structured data for homepage SEO
const baseUrl = 'https://freeformathub.com';

// Organization schema
const organizationSchema = {
  "@type": "Organization",
  "@id": `${baseUrl}#organization`,
  "name": "FreeFormatHub",
  "url": baseUrl,
  "logo": {
    "@type": "ImageObject",
    "url": `${baseUrl}/logo.png`,
    "width": 200,
    "height": 200
  },
  "description": "Free online developer tools for formatting, converting, and validating data with complete privacy and security.",
  "foundingDate": "2024",
  "sameAs": [
    "https://github.com/freeformathub"
  ],
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "customer service",
    "email": "contact@freeformathub.com",
    "availableLanguage": ["English"]
  },
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "Kijevska 5",
    "addressLocality": "Split",
    "postalCode": "21000",
    "addressCountry": "Croatia"
  },
  "areaServed": "Worldwide",
  "serviceType": "Online Developer Tools"
};

// WebSite schema with search functionality
const websiteSchema = {
  "@type": "WebSite",
  "@id": `${baseUrl}#website`,
  "name": "FreeFormatHub",
  "alternateName": "Free Format Hub",
  "description": "Free online business and developer tools for formatting, converting, encoding, and validating data. JSON formatter, Base64 encoder, URL decoder, and more.",
  "url": baseUrl,
  "publisher": organizationSchema,
  "inLanguage": "en-US",
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": `${baseUrl}/search?q={search_term_string}`,
      "actionPlatform": [
        "http://schema.org/DesktopWebPlatform",
        "http://schema.org/MobileWebPlatform"
      ]
    },
    "query-input": "required name=search_term_string"
  }
};

// Main WebApplication schema
const webApplicationSchema = {
  "@type": "WebApplication",
  "@id": `${baseUrl}#webapp`,
  "name": "FreeFormatHub",
  "description": "Free online business and developer tools for formatting, converting, and validating data. Zero friction tools that just work.",
  "url": baseUrl,
  "applicationCategory": "DeveloperApplication",
  "applicationSubCategory": "Data Processing Tools",
  "operatingSystem": "Any",
  "permissions": "no-storage",
  "isAccessibleForFree": true,
  "installUrl": baseUrl,
  "browserRequirements": "Requires JavaScript. Supported browsers: Chrome, Firefox, Safari, Edge",
  "softwareVersion": "1.0",
  "datePublished": "2024-01-01",
  "dateModified": new Date().toISOString().split('T')[0],
  "inLanguage": "en",
  "creator": organizationSchema,
  "publisher": organizationSchema,
  "offers": {
    "@type": "Offer",
    "price": "0",
    "@id": `${baseUrl}#offer`,
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock",
    "validFrom": "2024-01-01",
    "description": "Free access to all developer tools and features",
    "seller": organizationSchema
  },
  "featureList": [
    "JSON Data Formatter & Validator Tools",
    "Base64 Encoding & Decoding Tools",
    "URL Encoding & Decoding for Developers",
    "JWT Token Decoder & Validator",
    "XML Data Formatting Tools",
    "YAML Configuration Formatter",
    "CSS Code Beautifier & Minifier",
    "HTML Markup Formatter",
    "SQL Query Formatter & Validator",
    "Text Case Conversion Tools",
    "Color Code Converter & Generator",
    "Cryptographic Hash Generator",
    "Secure Password Generation Tools",
    "QR Code & Barcode Generator",
    "Image Format Converter",
    "CSV Data Processing Tools",
    "Data Validation & Encoding Tools",
    "Developer Productivity Utilities",
    "And 100+ more free data formatting tools"
  ],
  "screenshot": [
    `${baseUrl}/screenshots/homepage.png`,
    `${baseUrl}/screenshots/json-formatter.png`,
    `${baseUrl}/screenshots/base64-encoder.png`
  ]
};

// ItemList for trending tools
const trendingToolsListSchema = {
  "@type": "ItemList",
  "@id": `${baseUrl}#trending-tools`,
  "name": "Trending Developer Tools",
  "description": "Most popular developer tools on FreeFormatHub",
  "numberOfItems": trendingTools.length,
  "itemListElement": trendingTools.map((tool, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "item": {
      "@type": "SoftwareApplication",
      "name": tool.name,
      "description": tool.description,
      "url": `${baseUrl}/${tool.category.id}/${tool.slug}`,
      "applicationCategory": tool.category.name,
      "isAccessibleForFree": true
    }
  }))
};

// FAQ schema for common questions
const faqSchema = {
  "@type": "FAQPage",
  "@id": `${baseUrl}#faq`,
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Are these JSON formatter and data conversion tools really free?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, all JSON formatters, Base64 encoders, XML validators, and other data formatting tools on FreeFormatHub are completely free to use with no registration required. There are no hidden fees or premium tiers for any developer tools."
      }
    },
    {
      "@type": "Question",
      "name": "Is my data secure when using these online formatting tools?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Absolutely. All JSON formatting, data encoding, and validation processing happens locally in your browser. No sensitive data is sent to our servers or stored anywhere. Your code and data remain completely private and secure."
      }
    },
    {
      "@type": "Question",
      "name": "What types of data formatting and developer tools are available?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "We offer 119+ free developer tools including JSON formatters, XML validators, Base64 encoders/decoders, URL encoding tools, YAML formatters, CSV converters, SQL formatters, hash generators, password tools, QR code generators, and many more data processing utilities for developers and businesses."
      }
    },
    {
      "@type": "Question",
      "name": "Do I need to install software to use these data formatting tools?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No installation required. All JSON formatters, data converters, and developer tools work directly in your web browser on any device - desktop, tablet, or mobile. Just paste your data and get instant formatted results."
      }
    },
    {
      "@type": "Question",
      "name": "Can I use these tools for batch data processing and validation?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, many of our data formatting tools support batch processing. You can format multiple JSON files, validate multiple URLs, convert multiple data formats, and process large datasets efficiently using our developer productivity tools."
      }
    },
    {
      "@type": "Question",
      "name": "What data formats do these online tools support?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Our tools support all major data formats including JSON, XML, YAML, CSV, SQL, HTML, CSS, JavaScript, Base64, URL encoding, JWT tokens, and many other formats commonly used by developers and data professionals."
      }
    }
  ]
};

// Service schema for SEO
const serviceSchema = {
  "@type": "Service",
  "@id": `${baseUrl}#service`,
  "name": "Free Data Formatting & Developer Tools Service",
  "description": "Free online JSON formatters, Base64 encoders, XML validators, and 119+ data processing tools for developers and businesses to format, convert, encode, validate, and transform data",
  "provider": organizationSchema,
  "areaServed": "Worldwide",
  "availableChannel": {
    "@type": "ServiceChannel",
    "serviceUrl": baseUrl,
    "serviceType": "Online Data Formatting Platform"
  },
  "category": "Developer Tools & Data Formatting Services",
  "serviceType": "JSON Formatting, Data Conversion & Validation Tools",
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "Developer Tools Catalog",
    "itemListElement": TOOL_CATEGORIES.map((category, index) => ({
      "@type": "Offer",
      "itemOffered": {
        "@type": "Service",
        "name": category.name,
        "description": category.description,
        "category": category.name
      },
      "price": "0",
      "priceCurrency": "USD"
    }))
  }
};

// Comprehensive JSON-LD structure
const jsonLd = {
  "@context": "https://schema.org",
  "@graph": [
    organizationSchema,
    websiteSchema,
    webApplicationSchema,
    trendingToolsListSchema,
    faqSchema,
    serviceSchema
  ]
};
---

<BaseLayout
  title="FreeFormatHub - 119 Developer Tools. Zero Friction."
  description="Format JSON, encode Base64, convert data, and more. 119 developer tools that run instantly in your browser. No signup required, works offline."
  keywords={[
    'json formatter', 'base64 encoder', 'url decoder', 'xml validator', 'developer tools',
    'currency converter', 'jwt decoder', 'yaml formatter', 'csv converter', 'data tools',
    'text converter', 'hash generator', 'password generator', 'qr code generator'
  ]}
  jsonLd={jsonLd}
>
  <!-- Skip Navigation Links (Accessibility) -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded-lg z-50 transition-all">
    Skip to main content
  </a>
  <a href="#browse-all-heading" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-32 bg-blue-600 text-white px-4 py-2 rounded-lg z-50 transition-all">
    Skip to tool directory
  </a>

  <!-- Main Content -->
  <main role="main" id="main-content" tabindex="-1">
  <div class="space-y-12 py-10">
    <section class="rounded-3xl border border-slate-200 bg-white p-8 shadow-sm">
      <header class="space-y-4">
        <p class="text-xs uppercase tracking-[0.4em] text-slate-500">FreeFormatHub</p>
        <h1 class="text-4xl font-bold text-slate-900 md:text-5xl">Free Online Tools For Developers</h1>
        <p class="max-w-3xl text-lg text-slate-600">
          Format JSON, validate XML, convert CSV files, and automate everyday data cleanup in a single workspace.
          Every tool runs in your browser — no accounts, no limits, no data leaves your machine.
        </p>
      </header>
      <div class="mt-8 grid gap-4 md:grid-cols-2">
        <div class="flex items-start gap-3">
          <span class="mt-1 inline-flex h-2 w-2 flex-none rounded-full bg-blue-500"></span>
          <p class="text-sm text-slate-600">
            119+ formatters, validators, converters, encoders, generators, and productivity helpers.
          </p>
        </div>
        <div class="flex items-start gap-3">
          <span class="mt-1 inline-flex h-2 w-2 flex-none rounded-full bg-blue-500"></span>
          <p class="text-sm text-slate-600">
            Privacy-first: all processing happens locally with no uploads or background requests.
          </p>
        </div>
        <div class="flex items-start gap-3">
          <span class="mt-1 inline-flex h-2 w-2 flex-none rounded-full bg-blue-500"></span>
          <p class="text-sm text-slate-600">
            Keyboard-centric search, favorites, and history for instant access to your go-to utilities.
          </p>
        </div>
        <div class="flex items-start gap-3">
          <span class="mt-1 inline-flex h-2 w-2 flex-none rounded-full bg-blue-500"></span>
          <p class="text-sm text-slate-600">
            Built for speed — perfect for QA engineers, data analysts, support teams, and developers.
          </p>
        </div>
      </div>
      <div class="mt-10 flex flex-wrap gap-3">
        <a
          href="/search"
          class="inline-flex items-center gap-2 rounded-full bg-blue-600 px-5 py-3 text-sm font-semibold text-white shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
        >
          Browse all tools
          <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H7" />
          </svg>
        </a>
        <a
          href="/blog"
          class="inline-flex items-center gap-2 rounded-full border border-slate-200 px-5 py-3 text-sm font-semibold text-slate-700 transition hover:border-blue-300 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-200 focus:ring-offset-2"
        >
          Read latest guides
        </a>
      </div>
    </section>

    <section aria-label="Sponsored placement" class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
      <AdPlacement type="content" lazy={true} />
    </section>

    {trendingTools.length > 0 && (
      <section
        class="rounded-3xl border border-slate-200 bg-white p-8 shadow-sm"
        aria-labelledby="trending-tools-heading"
      >
        <header class="space-y-2 text-center">
          <p class="text-xs uppercase tracking-[0.4em] text-slate-500">Featured</p>
          <h2 id="trending-tools-heading" class="text-2xl font-semibold text-slate-800 md:text-3xl">
            –List of tools–
          </h2>
          <p class="text-sm text-slate-500">
            Quick links to the utilities developers open every day.
          </p>
        </header>

        <div class="mt-10 space-y-6">
          {trendingTools.map((tool) => {
            const features = Array.isArray(tool.features) ? tool.features.slice(0, 4) : [];
            return (
              <article
                class="rounded-2xl border border-slate-100 bg-slate-50 p-6 transition hover:border-blue-200 hover:bg-white"
                aria-labelledby={`tool-${tool.id}-title`}
              >
                <div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
                  <div class="flex items-center gap-4">
                    <div class="flex h-14 w-14 items-center justify-center rounded-xl bg-blue-100 text-2xl">
                      <span aria-hidden="true">{tool.icon}</span>
                    </div>
                    <div>
                      <a
                        href={`/${tool.category.id}/${tool.slug}`}
                        id={`tool-${tool.id}-title`}
                        class="text-xl font-semibold text-slate-900 hover:text-blue-600 focus:outline-none focus-visible:underline"
                      >
                        {tool.name}
                      </a>
                      <p class="text-xs uppercase tracking-wide text-slate-500">
                        {tool.category.name}
                      </p>
                    </div>
                  </div>
                  <a
                    href={`/${tool.category.id}/${tool.slug}`}
                    class="inline-flex items-center gap-2 self-start rounded-full border border-blue-200 px-4 py-2 text-sm font-semibold text-blue-600 transition hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-200 md:self-center"
                  >
                    Launch tool
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H7" />
                    </svg>
                  </a>
                </div>
                <p class="mt-4 text-sm text-slate-600">
                  {tool.description}
                </p>
                {features.length > 0 && (
                  <ul class="mt-4 grid gap-2 sm:grid-cols-2">
                    {features.map((feature) => (
                      <li class="flex items-start gap-2 text-sm text-slate-600">
                        <span class="mt-1 inline-flex h-2 w-2 flex-none rounded-full bg-blue-400"></span>
                        <span>{feature}</span>
                      </li>
                    ))}
                  </ul>
                )}
              </article>
            );
          })}
        </div>
      </section>
    )}

    {curatedCollections.length > 0 && (
      <section
        class="rounded-3xl border border-slate-200 bg-white p-8 shadow-sm"
        aria-labelledby="collections-heading"
      >
        <header class="space-y-2 text-center">
          <p class="text-xs uppercase tracking-[0.4em] text-slate-500">Collections</p>
          <h2 id="collections-heading" class="text-2xl font-semibold text-slate-800 md:text-3xl">
            Explore by category
          </h2>
          <p class="text-sm text-slate-500">
            Jump into the toolkits that keep your workflows moving.
          </p>
        </header>

        <div class="mt-8 grid gap-6 md:grid-cols-2 xl:grid-cols-3">
          {curatedCollections.map((collection) => (
            <article
              class="rounded-2xl border border-slate-100 bg-slate-50 p-6 text-left transition hover:border-blue-200 hover:bg-white"
              aria-labelledby={`collection-${collection.id}`}
            >
              <header class="space-y-2">
                <a
                  href={`/${collection.id}`}
                  id={`collection-${collection.id}`}
                  class="text-lg font-semibold text-slate-900 hover:text-blue-600 focus:outline-none focus-visible:underline"
                >
                  {collection.name}
                </a>
                <p class="text-sm text-slate-600">{collection.description}</p>
              </header>
              <ul class="mt-4 space-y-2">
                {collection.tools.slice(0, 5).map((tool) => (
                  <li key={tool.id}>
                    <a
                      href={`/${tool.category.id}/${tool.slug}`}
                      class="group flex items-center justify-between rounded-xl border border-transparent px-3 py-2 text-sm text-slate-600 transition hover:border-blue-200 hover:bg-blue-50 hover:text-blue-700"
                    >
                      <span>{tool.name}</span>
                      <span class="text-xs text-slate-400 group-hover:text-blue-500">Open</span>
                    </a>
                  </li>
                ))}
              </ul>
              <div class="mt-6">
                <a
                  href={`/${collection.id}`}
                  class="inline-flex items-center gap-2 text-sm font-semibold text-blue-600 hover:text-blue-700"
                >
                  View all {collection.tools.length} tools
                  <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H7" />
                  </svg>
                </a>
              </div>
            </article>
          ))}
        </div>
      </section>
    )}

    <section
      class="rounded-3xl border border-slate-200 bg-white p-8 shadow-sm"
      aria-labelledby="features-heading"
    >
      <header class="space-y-2 text-center">
        <p class="text-xs uppercase tracking-[0.4em] text-slate-500">Why FreeFormatHub</p>
        <h2 id="features-heading" class="text-2xl font-semibold text-slate-800 md:text-3xl">
          Built for flow, trusted for privacy
        </h2>
      </header>

      <div class="mt-8 grid gap-6 md:grid-cols-3">
        <article class="rounded-2xl border border-slate-100 bg-slate-50 p-6 text-left">
          <div class="mb-4 inline-flex h-12 w-12 items-center justify-center rounded-xl bg-blue-100 text-blue-600">
            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-slate-900">Client-side processing</h3>
          <p class="mt-2 text-sm text-slate-600">
            Sensitive inputs stay on your device. Nothing is uploaded, stored, or shared — ideal for corporate and regulated environments.
          </p>
        </article>

        <article class="rounded-2xl border border-slate-100 bg-slate-50 p-6 text-left">
          <div class="mb-4 inline-flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-100 text-emerald-600">
            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-slate-900">Instant access</h3>
          <p class="mt-2 text-sm text-slate-600">
            No sign-ups, no paywalls, no surprise limitations. Open a tool, paste your data, and move on with your day.
          </p>
        </article>

        <article class="rounded-2xl border border-slate-100 bg-slate-50 p-6 text-left">
          <div class="mb-4 inline-flex h-12 w-12 items-center justify-center rounded-xl bg-purple-100 text-purple-600">
            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-slate-900">Offline friendly</h3>
          <p class="mt-2 text-sm text-slate-600">
            Works flawlessly without an internet connection, perfect for air-gapped teams and on-the-go problem solving.
          </p>
        </article>
      </div>
    </section>

    <section
      class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm"
      aria-labelledby="browse-all-heading"
    >
      <header class="space-y-2 text-center">
        <h2 id="browse-all-heading" class="text-xl font-semibold text-slate-800">
          Browse the full catalog
        </h2>
        <p class="text-sm text-slate-500">
          Search by category, tag, or recent history — everything is one keystroke away.
        </p>
      </header>
      <div class="mt-6">
        <ToolCategories categories={TOOL_CATEGORIES} client:load />
      </div>
    </section>
  </div>
</main>

  <!-- Internal Links for SEO -->
  <InternalLinksCluster />
</BaseLayout>
